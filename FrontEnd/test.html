<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sri Lanka Test Players Dashboard</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(to right, #e3f2fd, #ffffff);
      color: #333;
    }
    .container {
      max-width: 1200px;
      margin: auto;
      padding: 20px;
    }
    .header {
      text-align: center;
      background: #0d47a1;
      color: #fff;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }
    .header h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
    }
    .header p {
      font-size: 1.2em;
      color: #cfd8dc;
    }
    .controls {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-top: 30px;
    }
    .search-box {
      display: flex;
      align-items: center;
      background: #f1f1f1;
      padding: 10px 15px;
      border-radius: 25px;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .search-icon {
      margin-right: 10px;
      font-size: 1.2em;
    }
    #searchInput {
      border: none;
      background: transparent;
      font-size: 1em;
      outline: none;
      width: 100%;
    }
    .stats {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-around;
      gap: 15px;
    }
    .stat-card {
      background: #ffffff;
      padding: 20px;
      flex: 1;
      min-width: 150px;
      text-align: center;
      border-radius: 12px;
      border-left: 6px solid #0d47a1;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }
    .stat-number {
      font-size: 2em;
      font-weight: bold;
      color: #0d47a1;
    }
    .stat-label {
      font-size: 0.9em;
      color: #555;
    }
    .content {
      margin-top: 30px;
    }
    .players-table {
      background: #fff;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
    }
    .table-header {
      background: #0d47a1;
      color: white;
      padding: 20px;
    }
    .table-header h2 {
      margin: 0;
    }
    .table-header p {
      font-size: 0.9em;
      color: #cfd8dc;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 1em;
    }
    thead {
      background: #1976d2;
      color: white;
    }
    th, td {
      padding: 12px 15px;
      text-align: left;
    }
    tbody tr:nth-child(odd) {
      background: #f5faff;
    }
    tbody tr:hover {
      background: #e1f5fe;
    }
    .player-name {
      font-weight: bold;
      color: #0d47a1;
    }
    .role-cell {
      padding: 5px 10px;
      border-radius: 20px;
      color: white;
      display: inline-block;
      font-size: 0.85em;
      font-weight: 500;
    }
    .role-batsman {
      background: #1e88e5;
    }
    .role-bowler {
      background: #43a047;
    }
    .role-allrounder {
      background: #f9a825;
    }
    .role-keeper {
      background: #8e24aa;
    }
    .no-data {
      text-align: center;
      padding: 40px;
      color: #888;
    }
    .loading {
      text-align: center;
      padding: 40px;
      font-style: italic;
      color: #666;
    }
    .predict-button-container {
      text-align: center;
      margin: 40px 0;
    }
    .predict-button {
      padding: 12px 24px;
      font-size: 1.1em;
      background-color: #0d47a1;
      color: white;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    @media (max-width: 768px) {
      .stats {
        flex-direction: column;
        align-items: center;
      }
      .stat-card {
        width: 80%;
      }
      .controls {
        gap: 15px;
      }
      th, td {
        padding: 10px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üèè Sri Lanka Test Players</h1>
      <p>Complete details of Sri Lankan test cricket stars</p>
    </div>

    <div class="controls">
      <div class="search-box">
        <div class="search-icon">üîç</div>
        <input type="text" id="searchInput" placeholder="Search players by name or role..." />
      </div>

      <div class="stats" id="stats">
        <div class="stat-card"><div class="stat-number" id="totalPlayers">0</div><div class="stat-label">Total Players</div></div>
        <div class="stat-card"><div class="stat-number" id="batsmen">0</div><div class="stat-label">Batsmen</div></div>
        <div class="stat-card"><div class="stat-number" id="bowlers">0</div><div class="stat-label">Bowlers</div></div>
        <div class="stat-card"><div class="stat-number" id="allrounders">0</div><div class="stat-label">All-rounders</div></div>
        <div class="stat-card"><div class="stat-number" id="keepers">0</div><div class="stat-label">Keepers</div></div>
      </div>
    </div>

    <div class="content">
      <div id="playerTable">
        <div class="loading">Loading Sri Lanka test players...</div>
      </div>
    </div>

    <div class="predict-button-container">
      <button class="predict-button" onclick="predictXI()">üîÆ Predict XI</button>
    </div>
  </div>

  <script>
    let allPlayers = [];
    let filteredPlayers = [];

    // Demo data
    const demoData = [
       { playerId: "SL001", name: "Pathum Nissanka", age: 25, role: "Batsman", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm off break" },
      { playerId: "SL002", name: "Kusal Mendis", age: 28, role: "Wicket-keeper Batsman", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm off break" },
      { playerId: "SL003", name: "Dhananjaya de Silva", age: 32, role: "All-rounder", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm off break" },
      { playerId: "SL004", name: "Charith Asalanka", age: 26, role: "All-rounder", battingStyle: "Left-hand bat", bowlingStyle: "Right-arm off break" },
      { playerId: "SL005", name: "Angelo Mathews", age: 36, role: "All-rounder", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm medium" },
      { playerId: "SL006", name: "Dinesh Chandimal", age: 34, role: "Wicket-keeper Batsman", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm off break" },
      { playerId: "SL007", name: "Wanindu Hasaranga", age: 26, role: "All-rounder", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm leg break" },
      { playerId: "SL008", name: "Dasun Shanaka", age: 32, role: "All-rounder", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm medium" },
      { playerId: "SL009", name: "Chamika Karunaratne", age: 27, role: "All-rounder", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm medium-fast" },
      { playerId: "SL010", name: "Maheesh Theekshana", age: 23, role: "Bowler", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm off break" },
      { playerId: "SL011", name: "Lasith Malinga", age: 40, role: "Bowler", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm fast" },
      { playerId: "SL012", name: "Nuwan Pradeep", age: 36, role: "Bowler", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm fast-medium" },
      { playerId: "SL013", name: "Kasun Rajitha", age: 30, role: "Bowler", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm fast-medium" },
      { playerId: "SL014", name: "Lahiru Kumara", age: 26, role: "Bowler", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm fast" },
      { playerId: "SL015", name: "Dushmantha Chameera", age: 31, role: "Bowler", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm fast" },
      { playerId: "SL016", name: "Akila Dananjaya", age: 30, role: "Bowler", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm off break" },
      { playerId: "SL017", name: "Jeffrey Vandersay", age: 33, role: "Bowler", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm leg break" },
      { playerId: "SL018", name: "Kusal Perera", age: 33, role: "Wicket-keeper Batsman", battingStyle: "Left-hand bat", bowlingStyle: "Slow left-arm orthodox" },
      { playerId: "SL019", name: "Avishka Fernando", age: 26, role: "Batsman", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm off break" },
      { playerId: "SL020", name: "Bhanuka Rajapaksa", age: 32, role: "Wicket-keeper Batsman", battingStyle: "Left-hand bat", bowlingStyle: "Right-arm off break" },
      { playerId: "SL021", name: "Kamindu Mendis", age: 25, role: "All-rounder", battingStyle: "Left-hand bat", bowlingStyle: "Right-arm off break" },
      { playerId: "SL022", name: "Sadeera Samarawickrama", age: 28, role: "Wicket-keeper Batsman", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm off break" },
      { playerId: "SL023", name: "Oshada Fernando", age: 31, role: "Batsman", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm off break" },
      { playerId: "SL024", name: "Danushka Gunathilaka", age: 32, role: "Batsman", battingStyle: "Left-hand bat", bowlingStyle: "Right-arm off break" },
      { playerId: "SL025", name: "Kusal Janith Perera", age: 33, role: "Wicket-keeper Batsman", battingStyle: "Left-hand bat", bowlingStyle: "Slow left-arm orthodox" },
      { playerId: "SL026", name: "Thisara Perera", age: 35, role: "All-rounder", battingStyle: "Left-hand bat", bowlingStyle: "Right-arm medium-fast" },
      { playerId: "SL027", name: "Isuru Udana", age: 36, role: "All-rounder", battingStyle: "Left-hand bat", bowlingStyle: "Left-arm medium-fast" },
      { playerId: "SL028", name: "Lakshan Sandakan", age: 32, role: "Bowler", battingStyle: "Left-hand bat", bowlingStyle: "Slow left-arm chinaman" },
      { playerId: "SL029", name: "Seekkuge Prasanna", age: 37, role: "All-rounder", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm leg break" },
      { playerId: "SL030", name: "Milinda Siriwardana", age: 33, role: "All-rounder", battingStyle: "Left-hand bat", bowlingStyle: "Right-arm off break" },
      { playerId: "SL031", name: "Niroshan Dickwella", age: 31, role: "Wicket-keeper Batsman", battingStyle: "Left-hand bat", bowlingStyle: "Right-arm off break" },
      { playerId: "SL032", name: "Upul Tharanga", age: 39, role: "Batsman", battingStyle: "Left-hand bat", bowlingStyle: "Right-arm off break" },
      { playerId: "SL033", name: "Tillakaratne Dilshan", age: 47, role: "All-rounder", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm off break" },
      { playerId: "SL034", name: "Kumar Sangakkara", age: 46, role: "Wicket-keeper Batsman", battingStyle: "Left-hand bat", bowlingStyle: "Right-arm off break" },
      { playerId: "SL035", name: "Mahela Jayawardene", age: 46, role: "Batsman", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm off break" },
      { playerId: "SL036", name: "Sanath Jayasuriya", age: 54, role: "All-rounder", battingStyle: "Left-hand bat", bowlingStyle: "Slow left-arm orthodox" },
      { playerId: "SL037", name: "Aravinda de Silva", age: 58, role: "Batsman", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm off break" },
      { playerId: "SL038", name: "Muttiah Muralitharan", age: 51, role: "Bowler", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm off break" },
      { playerId: "SL039", name: "Chaminda Vaas", age: 49, role: "Bowler", battingStyle: "Left-hand bat", bowlingStyle: "Left-arm medium-fast" },
      { playerId: "SL040", name: "Rangana Herath", age: 45, role: "Bowler", battingStyle: "Left-hand bat", bowlingStyle: "Slow left-arm orthodox" },
      { playerId: "SL041", name: "Asela Gunaratne", age: 38, role: "All-rounder", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm medium" },
      { playerId: "SL042", name: "Sachith Pathirana", age: 32, role: "All-rounder", battingStyle: "Left-hand bat", bowlingStyle: "Slow left-arm orthodox" },
      { playerId: "SL043", name: "Binura Fernando", age: 29, role: "Bowler", battingStyle: "Right-hand bat", bowlingStyle: "Left-arm fast-medium" },
      { playerId: "SL044", name: "Praveen Jayawickrama", age: 25, role: "Bowler", battingStyle: "Left-hand bat", bowlingStyle: "Slow left-arm orthodox" },
      { playerId: "SL045", name: "Matheesha Pathirana", age: 21, role: "Bowler", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm fast" },
      { playerId: "SL046", name: "Dunith Wellalage", age: 20, role: "All-rounder", battingStyle: "Left-hand bat", bowlingStyle: "Slow left-arm orthodox" },
      { playerId: "SL047", name: "Janith Liyanage", age: 26, role: "All-rounder", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm medium" },
      { playerId: "SL048", name: "Sahan Arachchige", age: 24, role: "Wicket-keeper Batsman", battingStyle: "Left-hand bat", bowlingStyle: "Right-arm off break" },
      { playerId: "SL049", name: "Dilshan Madushanka", age: 24, role: "Bowler", battingStyle: "Left-hand bat", bowlingStyle: "Left-arm fast-medium" },
      { playerId: "SL050", name: "Pramod Madushan", age: 25, role: "Bowler", battingStyle: "Right-hand bat", bowlingStyle: "Right-arm fast-medium" }
    ];

    function loadDemoData() {
      allPlayers = [...demoData];
      filteredPlayers = [...allPlayers];
      displayPlayers(filteredPlayers);
      updateStats();
    }

    function displayPlayers(players) {
      const tableDiv = document.getElementById("playerTable");
      if (!players || players.length === 0) {
        tableDiv.innerHTML = `<div class="no-data"><h3>No players found</h3><p>No player data available</p></div>`;
        return;
      }

      let html = `
        <div class="players-table">
          <div class="table-header">
            <h2>Sri Lanka Test Squad Details</h2>
            <p>Complete information about ${players.length} players</p>
          </div>
          <table>
            <thead>
              <tr>
                <th>Player Name</th>
                <th>Age</th>
                <th>Role</th>
                <th>Batting Style</th>
                <th>Bowling Style</th>
              </tr>
            </thead>
            <tbody>
      `;

      players.forEach((player, index) => {
        const name = player.name || `Player ${index + 1}`;
        const age = player.age || "N/A";
        const role = player.role || "Not specified";
        const battingStyle = player.battingStyle || "Not specified";
        const bowlingStyle = player.bowlingStyle || "Not specified";

        let roleClass = "role-cell";
        const roleLower = role.toLowerCase();
        if (roleLower.includes("batsman") || roleLower.includes("batter")) roleClass += " role-batsman";
        else if (roleLower.includes("bowler")) roleClass += " role-bowler";
        else if (roleLower.includes("all-rounder") || roleLower.includes("allrounder")) roleClass += " role-allrounder";
        else if (roleLower.includes("keeper")) roleClass += " role-keeper";

        html += `
          <tr>
            <td class="player-name">üèè ${name}</td>
            <td>${age}</td>
            <td><span class="${roleClass}">${role}</span></td>
            <td class="batting-style">${battingStyle}</td>
            <td class="bowling-style">${bowlingStyle}</td>
          </tr>`;
      });

      html += `</tbody></table></div>`;
      tableDiv.innerHTML = html;
    }

    function updateStats() {
      const total = filteredPlayers.length;
      const batsmen = filteredPlayers.filter(p => (p.role || "").toLowerCase().includes("batsman") || (p.role || "").toLowerCase().includes("batter")).length;
      const bowlers = filteredPlayers.filter(p => (p.role || "").toLowerCase().includes("bowler")).length;
      const allrounders = filteredPlayers.filter(p => (p.role || "").toLowerCase().includes("allrounder") || (p.role || "").toLowerCase().includes("all-rounder")).length;
      const keepers = filteredPlayers.filter(p => (p.role || "").toLowerCase().includes("keeper")).length;

      document.getElementById("totalPlayers").textContent = total;
      document.getElementById("batsmen").textContent = batsmen;
      document.getElementById("bowlers").textContent = bowlers;
      document.getElementById("allrounders").textContent = allrounders;
      document.getElementById("keepers").textContent = keepers;
    }

    document.getElementById("searchInput").addEventListener("input", function(e) {
      const searchTerm = e.target.value.toLowerCase();
      filteredPlayers = allPlayers.filter(player => {
        const name = (player.name || "").toLowerCase();
        const role = (player.role || "").toLowerCase();
        const battingStyle = (player.battingStyle || "").toLowerCase();
        const bowlingStyle = (player.bowlingStyle || "").toLowerCase();
        return name.includes(searchTerm) || role.includes(searchTerm) || battingStyle.includes(searchTerm) || bowlingStyle.includes(searchTerm);
      });
      displayPlayers(filteredPlayers);
      updateStats();
    });

    function predictXI() {
      const button = document.querySelector(".predict-button");
      button.disabled = true;
      button.textContent = "Predicting...";

      fetch("http://localhost:5000/predict/test")
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            const players = data.team.map(player => ({
              playerId: player.playerId,
              name: player.name,
              role: player.role,
              age: player.age,
              battingStyle: player.batting_style,
              bowlingStyle: player.bowling_style
            }));
            allPlayers = players;
            filteredPlayers = players;
            displayPlayers(players);
            updateStats();
            button.textContent = "‚úÖ XI Predicted";
          } else {
            alert("‚ùå Prediction failed: " + data.error);
            button.textContent = "üîÆ Predict XI";
          }
          button.disabled = false;
        })
        .catch(error => {
          alert("‚ùå Error connecting to backend:\n" + error);
          button.disabled = false;
          button.textContent = "üîÆ Predict¬†XI";
    ¬†¬†¬†¬†});
    }

    window.addEventListener('load', loadDemoData);
  </script>
</body>
</html>
